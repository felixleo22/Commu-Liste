version: "3"

networks:
  lbs.net:
    driver: bridge

services:
  client:
    image: node
    environment:
      - NODE_ENV=dev
      - VHOST_HOSTNAME=client.local
    ports:
      - "80:8080"
    volumes:
      - .:/app/client
    working_dir: /app/client
    command: npm run dev
    networks:
      - lbs.net
      
  database:
    image: 'mongo'
    container_name: 'mongo'
    environment:
        - MONGO_INITDB_DATABASE = ConsoApp
        - MONGO_INITDB_USERNAME = root
        - MONGO_INITDB_PASSWORD = rootpassword
    volumes:
        - ./init-mongo.js:/docker-entrypoint-initdb.d/init-mongo.js:ro
        - ./mongo-volume:/data/db
    ports:
        - '27017-27019:27017-27019'